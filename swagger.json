{"openapi":"3.0.0","info":{"title":"Simple authentication example","version":"1.0.0","description":"REST API interface for simple authentication example.","license":{"name":"Licensed Under MIT","url":"https://spdx.org/licenses/MIT.html"},"contact":{"name":"Cihan Sari","url":"https://cihansari.com"}},"servers":[{"url":"http://localhost:8080","description":"Development server"},{"url":"http://localhost:4000","description":"Development Go server"}],"paths":{"/api/auth/register":{"post":{"summary":"Register a user.","description":"Registers a user with the given role. Currently everyone can register.","requestBody":{"description":"User registration body","required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","description":"Email must be unique.","example":"example@mail.com"},"password":{"type":"string","description":"User password","example":"EH62zsK4qb~^.b/@"},"roles":{"type":"array","example":["user","moderator","admin"],"items":{"type":"string","description":"User roles."}}}}}}},"responses":{"200":{"description":"User registered.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","description":"User registered message.","example":"User was registered successfully!"}}}}}},"406":{"description":"Missing parameter.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","description":"Registering user failed message.","example":"Missing email or password!"}}}}}},"500":{"description":"Server error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api/auth/login":{"post":{"summary":"Login with a user.","description":"Logs the user in and returns a JWT token.","requestBody":{"description":"User login body","required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","description":"User email","example":"example@mail.com"},"password":{"type":"string","description":"User password","example":"EH62zsK4qb~^.b/@"}}}}}},"responses":{"200":{"description":"User information logged in.","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"User id.","example":"616k4jc743346f14273d97f9"},"email":{"type":"string","description":"User email.","example":"example@mail.com"},"roles":{"type":"array","items":{"type":"string","description":"User roles.","example":"ROLE_ADMIN"}},"accessToken":{"type":"string","description":"User access token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYxNmM0Y2M3ODMyNDZlMTQxNzNjOTdmOSIsImlhdCI6MTYzNDU0MzM0MiwiZXhwIjoxNjM0ODQzMzQyfQ.cEcJ-3T20NhK7MUWEkXiMnocbkaNbizSMM-SO1b86Wk"}}}}}},"404":{"description":"Server error.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","description":"Error message.","example":"User not found!"}}}}}},"500":{"description":"Server error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api/test/guest":{"get":{"summary":"Access guest content.","description":"Access content without any login requirement.","responses":{"200":{"description":"Guest content","content":{"text/plain":{"schema":{"type":"string","description":"Public guest content.","example":"Guest"}}}},"500":{"description":"Server error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api/test/user":{"get":{"summary":"Access normal user content.","description":"Access content using issued token.","parameters":[{"$ref":"#components/parameters/AccessToken"}],"responses":{"200":{"description":"User content","content":{"text/plain":{"schema":{"type":"string","description":"Private user role content.","example":"User"}}}},"401":{"description":"Invalid token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidToken"}}}},"403":{"description":"Missing role","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MissingRole"}}}},"406":{"description":"Missing token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoToken"}}}},"500":{"description":"Server error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api/test/moderator":{"get":{"summary":"Access moderator user content.","description":"Access content using issued token.","parameters":[{"$ref":"#components/parameters/AccessToken"}],"responses":{"200":{"description":"Moderator content","content":{"text/plain":{"schema":{"type":"string","description":"Private moderator role content.","example":"Moderator"}}}},"401":{"description":"Invalid token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidToken"}}}},"403":{"description":"Missing role","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MissingRole"}}}},"406":{"description":"Missing token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoToken"}}}},"500":{"description":"Server error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api/test/admin":{"get":{"summary":"Access administrator user content.","description":"Access content using issued token.","parameters":[{"$ref":"#components/parameters/AccessToken"}],"responses":{"200":{"description":"Administrator content","content":{"text/plain":{"schema":{"type":"string","description":"Private administrator role content.","example":"Administrator"}}}},"401":{"description":"Invalid token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidToken"}}}},"403":{"description":"Missing role","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MissingRole"}}}},"406":{"description":"Missing token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoToken"}}}},"500":{"description":"Server error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}}},"components":{"schemas":{"Error":{"type":"object","properties":{"location":{"type":"string","description":"Error location for reporting.","example":"Authentication"},"type":{"type":"string","description":"Error type for reporting.","example":"Database error!"},"message":{"type":"string","description":"Error message.","example":"Unauthorized!"}}},"InvalidToken":{"type":"object","properties":{"message":{"type":"string","description":"Error message.","example":"Unauthorized!"}}},"MissingRole":{"type":"object","properties":{"message":{"type":"string","description":"Error message.","example":"Requires Admin Role!"}}},"NoToken":{"type":"object","properties":{"message":{"type":"string","description":"Error message.","example":"No token provided!"}}}},"parameters":{"AccessToken":{"name":"x-access-token","in":"header","description":"Access token","required":true,"type":"string"}}},"tags":[]}